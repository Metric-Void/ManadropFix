plugins {
    id 'maven-publish'
    id 'java-gradle-plugin'
}

version = '1.0'

dependencies {
    implementation gradleApi()
    shadow 'org.yaml:snakeyaml:1.29'
    shadow project(':util')
}

gradlePlugin {
    plugins {
        manadrop {
            id = 'com.metricv.ManadropFix'
            implementationClass = 'fr.il_totore.manadrop.ManaDrop'
        }
    }
}

//pluginBundle {
//    ext['gradle.publish.key'] = System.getenv('gradle.publish.key')
//    ext['gradle.publish.secret'] = System.getenv('gradle.publish.secret')
//    website = 'https://github.com/Iltotore/ManaDrop'
//    vcsUrl = 'https://github.com/Iltotore/ManaDrop'
//    description = 'A Gradle plugin for Minecraft Development'
//    tags = ['minecraft', 'spigot', 'bungeecord']
//    plugins {
//        manadrop {
//            displayName = 'ManaDrop'
//        }
//    }
//}

shadowJar {
    configurations = [project.configurations.shadow]
    classifier ''
}

jar {
    enabled false
    dependsOn shadowJar
}